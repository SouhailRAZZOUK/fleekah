(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t){},143:function(e,t,n){e.exports=n(302)},213:function(e,t,n){},220:function(e,t,n){},228:function(e,t){},258:function(e,t){},267:function(e,t){},282:function(e,t,n){},287:function(e,t,n){},289:function(e,t,n){},291:function(e,t,n){},294:function(e,t,n){},300:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n(0),o=n.n(r),c=n(29),i=n.n(c),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var u=n(5),h=n(4),d=n(6),m=n(3),p=n(7),f=n(306),b=n(311),O=n(309),E=n(23),j=n(13),g="".concat("https","://wt-souhail_razzouk-hotmail_com-0.sandbox.auth0-extend.com/fleekah-back-end"),y=function(e){if(!e.ok)throw new Error("error");return e},C=function(){return function(e){return e({type:"FETCH_PHOTOS_STARTED"}),fetch("".concat(g,"/photos")).then(y).then(function(e){return e.json()}).then(function(t){return e({data:t,error:null,loading:!1,finished:!0,type:"FETCH_PHOTOS_SUCCESS"})}).catch(function(t){e({error:t,data:null,loading:!1,type:"FETCH_PHOTOS_FAILURE"})})}},_=n(21),v=n(2),k=n(9),S=n(55),T=n.n(S),P=(n(78),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.imageObject;return e?o.a.createElement(T.a,{src:e.thumbnail,alt:e.description._content}):o.a.createElement("div",null,"No image")}}]),t}(r.PureComponent)),A=n(303),w=(n(173),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._renderThumbnail=n._renderThumbnail.bind(Object(v.a)(Object(v.a)(n))),n._renderThumbnails=n._renderThumbnails.bind(Object(v.a)(Object(v.a)(n))),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_renderThumbnail",value:function(e,t){return this.props.withLink?o.a.createElement(k.Cell,{key:t,desktopColumns:3,tabletColumns:4,phoneColumns:4},o.a.createElement(A.a,{to:"/photo/".concat(e.id)},o.a.createElement(P,{imageObject:e}))):o.a.createElement(k.Cell,{key:t,desktopColumns:3,tabletColumns:4,phoneColumns:4},o.a.createElement(P,{key:t,imageObject:e}))}},{key:"_renderThumbnails",value:function(e){return e&&Array.isArray(e)?e.map(this._renderThumbnail):"No images"}},{key:"render",value:function(){var e=this.props.images;return e=e?e.filter(function(e){return e}):[],o.a.createElement(k.Row,null,this._renderThumbnails(e))}}]),t}(r.PureComponent)),H=n(56),R=n.n(H),F=n(129),I=n.n(F),D=n(130),L=n.n(D),x=n(27),B=n.n(x),N=(n(209),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._handleLoadingState=e._handleLoadingState.bind(Object(v.a)(Object(v.a)(e))),e._renderFinishState=e._renderFinishState.bind(Object(v.a)(Object(v.a)(e))),e._renderLoadingState=e._renderLoadingState.bind(Object(v.a)(Object(v.a)(e))),e._handleRetryClick=e._handleRetryClick.bind(Object(v.a)(Object(v.a)(e))),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_renderLoadingState",value:function(){return o.a.createElement(R.a,{size:40})}},{key:"_renderFinishState",value:function(){return o.a.createElement("p",null,"No more photos to show")}},{key:"_handleRetryClick",value:function(){var e=this.props.onRetry;e&&e()}},{key:"_returnRetryState",value:function(){var e=o.a.createElement(B.a,{icon:"refresh"});return o.a.createElement(I.a,{dense:!0,raised:!0,icon:e,onClick:this._handleRetryClick},"Retry")}},{key:"_handleLoadingState",value:function(e){var t=e.isVisible,n=this.props,a=n.loading,r=n.onVisible,o=n.error;return t&&r&&r(),a?this._renderLoadingState():o?this._returnRetryState():this._renderFinishState()}},{key:"render",value:function(){return o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{align:"middle",phoneColumns:4,tabletColumns:8,desktopColumns:12,style:{textAlign:"center",paddingTop:"24px"}},o.a.createElement(L.a,null,this._handleLoadingState)))}}]),t}(r.PureComponent)),U=n(131),M=(n(211),n(213),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._snackBarRef=o.a.createRef(),e._createMDCSnackBar=e._createMDCSnackBar.bind(Object(v.a)(Object(v.a)(e))),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_createMDCSnackBar",value:function(){var e=i.a.findDOMNode(this._snackBarRef.current);this._snackBarComponent=new U.MDCSnackbar(e)}},{key:"_show",value:function(e){this._snackBarComponent.show(e)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.close,a={message:t,timeout:36e4,actionText:"Close",actionHandler:function(){n&&n()}};this._createMDCSnackBar(),this._show(a)}},{key:"render",value:function(){return o.a.createElement("div",{className:"mdc-snackbar mdc-snackbar--error",ref:this._snackBarRef,"aria-live":"assertive","aria-atomic":"true","aria-hidden":"true"},o.a.createElement("div",{className:"mdc-snackbar__text"}),o.a.createElement("div",{className:"mdc-snackbar__action-wrapper"},o.a.createElement("button",{type:"button",className:"mdc-snackbar__action-button"})))}}]),t}(r.PureComponent)),z=Object(_.createAlert)({alertName:"snackBar"})(M),G=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._fetchNextPhotosBatch=e._fetchNextPhotosBatch.bind(Object(v.a)(Object(v.a)(e))),e._retryFetchPhotos=e._retryFetchPhotos.bind(Object(v.a)(Object(v.a)(e))),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.lazy,n=e.fetchNextPhotosBatch,a=e.fetchPhotos,r=e.page;t?n(r||1):a()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.alerts,n=e.error,a=e.finished;n&&a&&t.createAlert("snackBar","Couldn't load images \n [".concat(n,"]"))}},{key:"_fetchNextPhotosBatch",value:function(){var e=this.props,t=e.page,n=e.loading,a=e.finished,r=e.fetchNextPhotosBatch;n||a||r(t)}},{key:"_retryFetchPhotos",value:function(){var e=this.props,t=e.lazy,n=e.page,a=e.fetchPhotos,r=e.fetchNextPhotosBatch;t?r(n):a()}},{key:"render",value:function(){var e=this.props,t=e.withLink,n=e.data,a=e.loading,r=e.lazy,c=e.finished,i=!Array.isArray(n);return o.a.createElement(k.Grid,null,o.a.createElement(w,{withLink:t,images:n}),r?o.a.createElement(N,{loading:a,finished:c,error:i,onVisible:this._fetchNextPhotosBatch,onRetry:this._retryFetchPhotos}):o.a.createElement(N,{loading:a,finished:c,onRetry:this._retryFetchPhotos}),o.a.createElement(k.Row,null,o.a.createElement(k.Cell,null,o.a.createElement(z,null))))}}]),t}(r.PureComponent),V=Object(E.connect)(function(e){var t=e.flickrReducer;return{page:t.page||1,data:t.data,error:t.error,loading:t.loading,finished:t.finished,withLink:!0,lazy:!0}},function(e,t){return{fetchPhotos:function(){return e(C())},fetchNextPhotosBatch:function(t){return e(function(e){return function(t){return t({type:"FETCH_PHOTOS_BATCH_STARTED"}),fetch("".concat(g,"/photos?page=").concat(e)).then(function(e){return e.json()}).then(function(n){if(Array.isArray(n)&&n.length)return t({error:null,data:n,page:e,loading:!1,finished:!1,type:"FETCH_PHOTOS_BATCH_SUCCESS"});t({error:null,loading:!1,finished:!0,type:"FETCH_PHOTOS_BATCH_FINISH"})}).catch(function(n){t({error:n,data:null,page:e,loading:!1,finished:!0,type:"FETCH_PHOTOS_BATCH_FAILURE"})})}}(t))},alerts:Object(j.bindActionCreators)(_.actions,e)}})(G),W=n(132),J=n.n(W),K=o.a.createElement(A.a,{to:"/"},o.a.createElement(B.a,{key:"item",icon:"home"})),$=o.a.createElement(A.a,{to:"/map"},o.a.createElement(B.a,{key:"item",icon:"map"})),q=o.a.createElement(A.a,{to:"/searchByColors"},o.a.createElement(B.a,{key:"item",icon:"search"})),Q={home:[$,q],search:[K,$],map:[K,q],all:[K,$,q]},X=(n(216),n(218),n(220),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.canGoBack,a=e.history,r=e.type;return r=r||"all",o.a.createElement(J.a,{title:t,navigationIcon:o.a.createElement(B.a,{icon:"arrow_back",onClick:function(){a.goBack()},style:{display:n?"block":"none"}}),actionItems:Q[r]})}}]),t}(r.PureComponent)),Y=n(133),Z=n(37),ee=n.n(Z),te=function(e){var t=e.tag,n=e.children,a=e.className,r=Object(Y.a)(e,["tag","children","className"]);return o.a.createElement(t,Object.assign({className:ee()("mdc-top-app-bar--fixed-adjust",a)},r),n)};te.defaultProps={tag:"main",className:""};var ne=te,ae=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"Home",type:"home",canGoBack:!1,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement(V,null)))}}]),t}(r.PureComponent),re=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.alt;return o.a.createElement(T.a,{src:t,alt:n})}}]),t}(r.PureComponent),oe=n(91),ce=n.n(oe),ie=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_handleDescription",value:function(e){var t={__html:ce()(e,{transformTags:{a:ce.a.simpleTransform("a",{target:"_blank"})}})};return t.__html?o.a.createElement("div",{dangerouslySetInnerHTML:t}):o.a.createElement("p",null,"No description found")}},{key:"render",value:function(){var e=this.props.description;return o.a.createElement("div",{className:"image-details__descritpion"},o.a.createElement("h3",null,"Description"),this._handleDescription(e._content))}}]),t}(r.PureComponent),le=n(304),se=n(305),ue=n(308),he=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_renderImageMarker",value:function(e){if(e)return o.a.createElement(le.a,{position:e})}},{key:"render",value:function(){var e=this.props.position;return o.a.createElement("div",{className:"image-details__geoloacation"},o.a.createElement("h3",null,"Geolocation"),e?o.a.createElement(se.a,{center:e,zoom:5,style:{height:"200px"}},o.a.createElement(ue.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this._renderImageMarker(e)):o.a.createElement("div",null,"No localization found"))}}]),t}(r.PureComponent),de=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.owner;return o.a.createElement("div",{className:"image-details__owner"},o.a.createElement("h3",null,"Photo By"),o.a.createElement(A.a,{to:"/userPhotos/".concat(e.id)},e.name))}}]),t}(r.PureComponent),me=n(92),pe=(n(280),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._renderTags=e._renderTags.bind(Object(v.a)(Object(v.a)(e))),e._renderTag=e._renderTag.bind(Object(v.a)(Object(v.a)(e))),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"_renderTag",value:function(e,t){return o.a.createElement(me.Chip,{key:t,id:e,label:e})}},{key:"_renderTags",value:function(e){return o.a.createElement(me.ChipSet,null,e.map(this._renderTag))}},{key:"render",value:function(){var e=this.props.tags;return o.a.createElement("div",{className:"image-details__tags"},o.a.createElement("h3",null,"Tags"),e&&e.length>0?this._renderTags(e):o.a.createElement("p",null,"No tags found"))}}]),t}(r.PureComponent)),fe=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"_renderImageDescription",value:function(e){if(e.description)return o.a.createElement(ie,{description:e.description})}},{key:"_renderImageGeolocation",value:function(e){if(e.latitude&&e.longitude){var t=[e.latitude,e.longitude];return o.a.createElement(he,{position:t})}return o.a.createElement(he,{position:null})}},{key:"_renderImageOwner",value:function(e){var t={name:e.ownername,id:e.owner};return o.a.createElement(de,{owner:t})}},{key:"_renderImageTags",value:function(e){var t=e.tags?e.tags.split(" "):[];return o.a.createElement(pe,{tags:t})}},{key:"render",value:function(){var e=this.props.image;return o.a.createElement("div",null,this._renderImageDescription(e),this._renderImageGeolocation(e),this._renderImageOwner(e),this._renderImageTags(e))}}]),t}(r.PureComponent),be=(n(282),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.style;return o.a.createElement("div",{className:"loader",style:n},o.a.createElement("div",{className:"loader__container"},o.a.createElement(R.a,{size:40}),o.a.createElement("p",null,t)))}}]),t}(r.PureComponent)),Oe=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement(be,{text:"Loading Image ...",style:{backgroundColor:"#fff",zIndex:"1001"}})}}]),t}(r.PureComponent),Ee=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.photoId;this.props.fetchPhotoDetails(e)}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.alerts,n=e.error;n&&t.createAlert("snackBar","Couldn't load image \n [".concat(n,"]"))}},{key:"render",value:function(){var e=this.props,t=e.image,n=e.loading,a=e.error;return o.a.createElement("div",null,n&&o.a.createElement(Oe,{size:40}),o.a.createElement(k.Grid,null,o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:6,phoneColumns:4},o.a.createElement(z,null))),Object.keys(t).length>0&&!a?o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:6,phoneColumns:4},o.a.createElement(re,{url:t.url||t.thumbnail,alt:t.title})),o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:6,phoneColumns:4},o.a.createElement(fe,{image:t}))):o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:6,phoneColumns:4},o.a.createElement("p",null,"Sorry, no image with this ID was found, please retry later")))))}}]),t}(r.PureComponent),je=Object(E.connect)(function(e){var t=e.flickrReducer;return{image:t.image||{},loading:t.loading||!1,error:t.error||!1}},function(e,t){return{fetchPhotoDetails:function(t){return e(function(e){return function(t){return t({type:"FETCH_PHOTO_DETAILS_STARTED"}),fetch("".concat(g,"/photo/").concat(e)).then(y).then(function(e){return e.json()}).then(function(e){return t({error:null,image:e,type:"FETCH_PHOTO_DETAILS_SUCCESS"})}).catch(function(e){t({error:e,type:"FETCH_PHOTO_DETAILS_FAILURE"})})}}(t))},alerts:Object(j.bindActionCreators)(_.actions,e)}})(Ee),ge=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"Image",type:"all",canGoBack:!0,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement(je,this.props)))}}]),t}(r.PureComponent),ye=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement(b.a,null,o.a.createElement(O.a,{path:"/photo/:photoId",component:ge}))}}]),t}(r.PureComponent),Ce=n(307),_e=Object(E.connect)(function(e){var t=e.flickrReducer;return{data:t.userData,error:t.error||!1,loading:t.loading||!1,lazy:!1,widthLink:!1}},function(e,t){return{fetchPhotos:function(){var n=t.match.params.userId;return e(function(e){return function(t){return t({type:"FETCH_USER_PHOTOS_STARTED"}),fetch("".concat(g,"/userPhotos/").concat(e)).then(y).then(function(e){return e.json()}).then(function(e){return t({error:null,data:e,loading:!1,type:"FETCH_USER_PHOTOS_SUCCESS"})}).catch(function(e){t({error:e,data:null,loading:!1,type:"FETCH_USER_PHOTOS_FAILURE"})})}}(n))},alerts:Object(j.bindActionCreators)(_.actions,e)}})(G),ve=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"User Images",type:"all",canGoBack:!0,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement(_e,this.props)))}}]),t}(r.PureComponent),ke=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement(b.a,null,o.a.createElement(O.a,{exact:!0,path:"/userPhotos",render:function(){return o.a.createElement(Ce.a,{to:"/"})}}),o.a.createElement(O.a,{path:"/userPhotos/:userId",component:ve}))}}]),t}(r.PureComponent),Se=n(10),Te=n(310),Pe=n(93),Ae=n.n(Pe),we=Ae.a.mark(He);function He(){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,1;case 2:case"end":return e.stop()}},we,this)}He(),n(287);var Re=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this)))._renderImageMarker=e._renderImageMarker.bind(Object(v.a)(Object(v.a)(e))),e._renderImagesMarkers=e._renderImagesMarkers.bind(Object(v.a)(Object(v.a)(e))),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPhotos(),this.setState(Object(Se.a)({},this.state,{once:He()}))}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"componentDidUpdate",value:function(){console.log("update");var e=this.props,t=e.alerts,n=e.error,a=this.state.once;n&&a.next().value&&(console.log("error"),setTimeout(function(){t.createAlert("snackBar","Couldn't load images \n [".concat(n,"]"))},100))}},{key:"_calculateMapCenter",value:function(e){var t=e.length,n=e.map(function(e){return parseFloat(e.latitude)}),a=e.map(function(e){return parseFloat(e.longitude)}),r=n&&n.length?n.reduce(function(e,t){return e+t}):0,o=a&&a.length?a.reduce(function(e,t){return e+t}):0;return[r?r/t:0,o?o/t:0]}},{key:"_renderImagesMarkers",value:function(e){return e.map(this._renderImageMarker)}},{key:"_renderImageMarker",value:function(e,t){var n=[e.latitude,e.longitude];return o.a.createElement(le.a,{position:n,key:t,style:{width:"auto"}},o.a.createElement(Te.a,null,o.a.createElement(A.a,{to:"/photo/".concat(e.id),style:{width:"102px"}},o.a.createElement("img",{src:e.thumbnail,alt:"",style:{height:"100px",maxWidth:"200px",display:"block"}}))))}},{key:"render",value:function(){var e=this.props,t=e.images,n=e.loading,a=t.filter(function(e){return 0!==e.latitude&&0!==e.longitude}),r=this._calculateMapCenter(a);return o.a.createElement("div",{className:"map-wrapper"},o.a.createElement(se.a,{center:r,zoom:2},o.a.createElement(ue.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&Array.isArray(a)&&a.length>0?this._renderImagesMarkers(a):null),n&&o.a.createElement(be,{text:"Loading Images ..."}),o.a.createElement(z,null))}}]),t}(r.PureComponent),Fe=Object(E.connect)(function(e){var t=e.flickrReducer;return{images:t.mapData||[],error:t.error||null,loading:t.loading}},function(e,t){return{fetchPhotos:function(){return e(C())},alerts:Object(j.bindActionCreators)(_.actions,e)}})(Re),Ie=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"Map",type:"map",canGoBack:!0,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement(Fe,null)))}}]),t}(r.PureComponent),De=n(140),Le=n(8),xe=n(137),Be=(n(289),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={listOpen:!1,headerTitle:n.props.title},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"handleClickOutside",value:function(e){this.setState({listOpen:!1})}},{key:"selectItem",value:function(e){var t=this.props,n=t.onChange,a=t.itemsKey;this.props.colors.forEach(function(e){e.selected=!1}),e.selected=!0,n?this.setState({headerTitle:e.value,listOpen:!1},n(e,a)):this.setState({headerTitle:e.value,listOpen:!1})}},{key:"toggleList",value:function(){this.setState(function(e){return{listOpen:!e.listOpen}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.colors,a=t.title,r=this.state,c=r.listOpen,i=r.headerTitle;return o.a.createElement("div",{className:"dd-wrapper"},o.a.createElement("div",{className:"dd-header",onClick:this.toggleList},o.a.createElement("div",{className:"dd-header-title"},i===a?i:o.a.createElement("span",{style:{display:"inline-block",height:"1.5em",width:"50%",backgroundColor:i,verticalAlign:"middle"}})),c?o.a.createElement(B.a,{icon:"expand_less"}):o.a.createElement(B.a,{icon:"expand_more"})),c&&o.a.createElement("ul",{className:"dd-list"},n.map(function(t,n){return o.a.createElement("li",{className:"dd-list-item",key:n,onClick:function(){return e.selectItem(t)}},o.a.createElement("span",{style:{display:"inline-block",height:"1.5em",width:"50%",backgroundColor:t.value}}),o.a.createElement("span",null,t.selected&&o.a.createElement(B.a,{icon:"check"})))})))}}]),t}(r.PureComponent)),Ne=Object(xe.a)(Be),Ue=n(141),Me=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(Ue.a)(Object(m.a)(t.prototype),"render",this).call(this)}}]),t}(G),ze=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._handleColorSelectionChange=n._handleColorSelectionChange.bind(Object(v.a)(Object(v.a)(n))),n.state={searchColors:{}},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchAvilableColors,n=e.fetchSearchResults,a=this.state.searchColors;this.setState(Object(Se.a)({},this.state,{once:He()})),t&&t(),n&&n(a)}},{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),a.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),a.captureException(e)})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.alerts,n=e.error,a=this.state.once;n&&a.next().value&&t.createAlert("snackBar","Couldn't load search results \n [".concat(n,"]"))}},{key:"componentWillMount",value:function(){var e=this.props.availableColors,t=e.vibrants,n=e.muted;t=this._reMapAvailableColors(t),n=this._reMapAvailableColors(n),this.setState({vibrants:t,muted:n})}},{key:"_handleColorSelectionChange",value:function(e,t){var n=this.props.fetchSearchResults,a=e.value.substring(4,e.value.length-1).replace(/ /g,"").split(","),r=this.state.searchColors,o=Object(Se.a)({},r,Object(Le.a)({},t,a));this.setState({searchColors:Object(Le.a)({},t,a)}),n&&n(o)}},{key:"_arrayToColor",value:function(e){var t=Object(De.a)(e,3),n=t[0],a=t[1],r=t[2];return{key:"color",value:"rgb(".concat(n,",").concat(a,",").concat(r,")"),selected:!1}}},{key:"_reMapAvailableColors",value:function(e){var t=this._arrayToColor;return e?e.map(t):[]}},{key:"render",value:function(){var e=this.props,t=e.alerts,n=e.data,a=this.state,r=a.vibrants,c=a.muted;return o.a.createElement("div",null,o.a.createElement(z,null),o.a.createElement(k.Grid,null,o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{desktopColumns:12,tabletColumns:8,phoneColumns:4},o.a.createElement("p",null," Please Select a Vibrant and a muted color to search for:"))),o.a.createElement(k.Row,null,o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:4,phoneColumns:4},o.a.createElement(Ne,{title:"Select Vibrant color",itemsKey:"vibrant",colors:r,onChange:this._handleColorSelectionChange,alerts:t})),o.a.createElement(k.Cell,{desktopColumns:6,tabletColumns:4,phoneColumns:4},o.a.createElement(Ne,{title:"Select Muted color",itemsKey:"muted",colors:c,onChange:this._handleColorSelectionChange,alerts:t})))),o.a.createElement(Me,{data:n,lazy:!1,withLink:!0}))}}]),t}(r.PureComponent),Ge=Object(E.connect)(function(e){var t=e.flickrReducer;return{data:t.searchData||[],error:t.error||!1,loading:t.loading||!1,availableColors:t.availableColors||[]}},function(e,t){return{fetchAvilableColors:function(){return e(function(e){return fetch("".concat(g,"/availableColors")).then(y).then(function(e){return e.json()}).then(function(t){return e({error:null,availableColors:t,type:"FETCH_AVAILABLE_COLORS_SUCCESS"})}).catch(function(t){e({error:t,availableColors:null,type:"FETCH_AVAILABLE_COLORS_FAILURE"})})})},fetchSearchResults:function(t){return e(function(e){return function(t){return t({type:"FETCH_SEARCH_RESULTS_STARTED"}),fetch("".concat(g,"/searchByColors"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(e)}).then(y).then(function(e){return e.json()}).then(function(e){return t({error:null,data:e,loading:!1,type:"FETCH_SEARCH_RESULTS_SUCCESS"})}).catch(function(e){t({error:e,data:null,loading:!1,type:"FETCH_SEARCH_RESULTS_FAILURE"})})}}(t))},alerts:Object(j.bindActionCreators)(_.actions,e)}})(ze),Ve=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"Search Photos By Colors",type:"search",canGoBack:!0,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement(Ge,null)))}}]),t}(r.PureComponent),We=(n(291),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{id:"main"},o.a.createElement(X,{title:"Not Found",type:"all",canGoBack:!0,history:this.props.history}),o.a.createElement(ne,{tag:"section"},o.a.createElement("div",{className:"FourOhFour"},o.a.createElement("div",{className:"bg",style:{backgroundImage:"url(http://i.giphy.com/l117HrgEinjIA.gif)"}}),o.a.createElement("div",{className:"code"},"404"))))}}]),t}(r.PureComponent)),Je=n(94),Ke={data:[],mapData:[],userData:[],page:1,error:!1,finished:!1,loading:!0,image:{},availableColors:{vibrants:[],muted:[]}};var $e=Object(j.combineReducers)({flickrReducer:function(e,t){if("undefined"===typeof(e=e||Ke))return Ke;switch(t.type){case"FETCH_PHOTOS_STARTED":return Object(Se.a)({},e,{error:!1,loading:!0});case"FETCH_PHOTOS_SUCCESS":return Object(Se.a)({},e,{error:!1,loading:!1,mapData:t.data.filter(function(e){return e})});case"FETCH_PHOTOS_FAILURE":return Object(Se.a)({},e,{error:t.error,loading:!1,mapData:t.data});case"FETCH_PHOTOS_BATCH_STARTED":return Object(Se.a)({},e,{finished:!1,error:!1,loading:!0});case"FETCH_PHOTOS_BATCH_SUCCESS":return t.page>=1?Object(Se.a)({},e,{page:t.page+1,error:!1,loading:!1,data:t.data?Object(Je.a)(e.data).concat(Object(Je.a)(t.data)):e.data}):Object(Se.a)({},e,{page:1,error:!1,loading:!1,data:t.data});case"FETCH_PHOTOS_BATCH_FINISH":return Object(Se.a)({},e,{loading:!1,error:!1,finished:!0,data:e.data});case"FETCH_PHOTOS_BATCH_FAILURE":return Object(Se.a)({},e,{error:t.error,finished:!0,loading:!1,data:null});case"FETCH_PHOTO_DETAILS_STARTED":return Object(Se.a)({},e,{image:{},error:!1,loading:!0});case"FETCH_PHOTO_DETAILS_SUCCESS":return Object(Se.a)({},e,{image:t.image,error:!1,loading:!1});case"FETCH_PHOTO_DETAILS_FAILURE":return Object(Se.a)({},e,{loading:!1,error:t.error,image:{}});case"FETCH_USER_PHOTOS_STARTED":return Object(Se.a)({},e,{error:!1,loading:!0,userData:[]});case"FETCH_USER_PHOTOS_SUCCESS":return Object(Se.a)({},e,{error:!1,loading:!1,userData:t.data});case"FETCH_USER_PHOTOS_FAILURE":return Object(Se.a)({},e,{error:t.error,loading:!1,userData:t.data});case"FETCH_AVAILABLE_COLORS_SUCCESS":return Object(Se.a)({},e,{error:!1,availableColors:t.availableColors});case"FETCH_AVAILABLE_COLORS_FAILURE":return Object(Se.a)({},e,{error:t.error,availableColors:[]});case"FETCH_SEARCH_RESULTS_STARTED":return Object(Se.a)({},e,{searchData:[],error:!1,loading:!0});case"FETCH_SEARCH_RESULTS_SUCCESS":return Object(Se.a)({},e,{searchData:t.data,error:!1,loading:!1});case"FETCH_SEARCH_RESULTS_FAILURE":return Object(Se.a)({},e,{error:t.error,searchData:[],loading:!1});default:return e}},alerts:_.alertReducer}),qe=n(138),Qe=n(139),Xe=n.n(Qe),Ye=window.devToolsExtension?window.devToolsExtension():void 0,Ze=Object(j.compose)(Object(j.applyMiddleware)(qe.a,Xe.a),Ye),et=Object(j.createStore)($e,Ze),tt=(n(294),n(296),n(298),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement(E.Provider,{store:et},o.a.createElement(f.a,null,o.a.createElement(b.a,null,o.a.createElement(O.a,{exact:!0,path:"/",component:ae}),o.a.createElement(O.a,{path:"/photo",component:ye}),o.a.createElement(O.a,{path:"/userPhotos",component:ke}),o.a.createElement(O.a,{path:"/map",component:Ie}),o.a.createElement(O.a,{path:"/searchByColors",component:Ve}),o.a.createElement(O.a,{path:"*",component:We}))))}}]),t}(r.Component));n(300);a.init({dsn:"https://59320adb81824a64b224a2ba69434242@sentry.io/1313355"}),i.a.render(o.a.createElement(tt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");l?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):s(t,e)})}}()}},[[143,2,1]]]);
//# sourceMappingURL=main.47593ab5.chunk.js.map